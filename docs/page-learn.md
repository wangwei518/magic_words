# 学习页需求文档

## 页面路径
`/pages/learn/index`

## 适用模式
1. `mode=today` 今日任务（新词+复习词）
2. `mode=wrong` 错词重做（按旧→新）

---

# 1. 功能总览
- 4个英文单词，4个中文释义，采用4×4「英文—中文」连线模式学习
- 可以从左侧或右侧单选，连续两次异侧单选，触发判断英文与中文释义是否匹配正确
- 正确连线：变为绿色主题；错误连线：变为红色主题
- 在today模式下，错词加入错词本
- 顶部进度条显示完成百分比
- “瞄一眼”按钮，展示当前页 4 个单词的正确连线，不改变当前的连线状态，不触发自动翻页
- 每页 4 词 → 全部连线正确后，等待 1 秒自动翻页
- 所有任务完成后跳转 `/pages/finish/index`

---

# 2. 页面布局

### 2.1 顶部区域
- 进度条，采用卡通图片代替游标
- 图片中间显示百分比，如 `45%`

---

### 2.2 词连线区（核心 UI）
- 左侧：4 个英文卡片
  - 显示英文 + 音标（英音/美音）
  - 音标信息在线获取
  - 点击自动播放发音
  - 点击高亮
- 右侧：4 个中文释义卡片
  - 显示词性(名词/动词/形容词等)及中文释义
  - 词性及中文释义，优先使用本地json文件，如无则在线获取
  - 点击高亮
- 中间通过 canvas 或绝对定位元素绘制连线
- 点击规则
  - 可先点左，也可先点右
  - 同侧第二次点击：切换选中
  - 异侧第二次点击 → 判定是否匹配
    - 正确：
        - 单词，中文释义及连线变为绿色主题(绿色线 + 绿色背景)
        - 标记 pair.matched = true
        - learnedCount++
    - 错误：
        - 单词，中文释义及连线变为绿色主题(红色线 + 红色背景）
        - today 模式：加入错词本
        - 用户可重新选择，错误线消失

### 2.3 瞄一眼按钮
- 展示当前页 4 个单词的正确连线（绿色）
- 按钮按下，展示当前页 4 个单词的正确连线并变为绿色主题
- 按钮抬起，恢复按下前的状态，不改变当前的连线状态(如果已有部分连线，需要保持住)
- 不修改 matched 状态
- 不自动翻页
- 不增加 learnedCount
- 纯提示层，遮挡用户正在进行的连线

---

# 3. 翻页逻辑
- 每页 4 词。
- 当前页 4 对都 matched=true 时：
```js
setTimeout(() => goNextPageOrFinish(), 1000)
```

# 4. 完成跳转
- 任务结束 → 跳到：/pages/finish/index?mode=<today|wrong>

---

